{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nconst initialAuthState = {\n  token: '',\n  user: [],\n  isLoadingLogin: false,\n  isLoadingRegister: false\n};\n/**\n * @param {userName, password, rePassword, email} payload\n */\nexport const fetchRegister = createAsyncThunk('auth/fetchRegister', async payload => {\n  await fetch('http://localhost:9090/user/register', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      'userName': payload.userName,\n      'password': payload.password,\n      'rePassword': payload.rePassword,\n      'email': payload.email\n    })\n  });\n});\nexport const fetchLogin = createAsyncThunk('auth/fetchLogin', async payload => {\n  const response = await fetch('http://localhost:9090/user/login', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'applciation/json'\n    },\n    body: JSON.stringify({\n      'userName': payload.userName,\n      'password': payload.password\n    })\n  }).then(res => res.json());\n  return response;\n});\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState: initialAuthState,\n  reducers: {},\n  extraReducers: build => {\n    build.addCase(fetchRegister.pending, state => {\n      state.isLoadingRegister = true;\n    });\n    build.addCase(fetchRegister.fulfilled, state => {\n      state.isLoadingRegister = false;\n    });\n    build.addCase(fetchLogin.pending, state => {\n      state.isLoadingLogin = true;\n    });\n    build.addCase(fetchLogin.fulfilled, (state, action) => {\n      state.isLoadingLogin = false;\n      if (action.payload.code === 200) {\n        state.token = action.payload.data;\n      } else if (action.payload.code === 400) alert(action.payload.message);\n    });\n  }\n});","map":{"version":3,"names":["createAsyncThunk","createSlice","initialAuthState","token","user","isLoadingLogin","isLoadingRegister","fetchRegister","payload","fetch","method","headers","body","JSON","stringify","userName","password","rePassword","email","fetchLogin","response","then","res","json","authSlice","name","initialState","reducers","extraReducers","build","addCase","pending","state","fulfilled","action","code","data","alert","message"],"sources":["/Users/berkhayta/Desktop/React-Social-Media/react-social-java14/src/store/feature/authSlice.tsx"],"sourcesContent":["import { createAsyncThunk, createSlice, PayloadAction } from \"@reduxjs/toolkit\"\nimport { IRegister } from \"../../components/models/IRegister\";\nimport { ILogin } from \"../../components/models/ILogin\";\nimport { IResponse } from \"../../components/models/IResponse\";\n\nconst initialAuthState={\n    token: '',\n    user: [],\n    isLoadingLogin: false,\n    isLoadingRegister: false\n}\n/**\n * @param {userName, password, rePassword, email} payload\n */\nexport const fetchRegister = createAsyncThunk(\n    'auth/fetchRegister',\n    async(payload: IRegister)=>{\n      await fetch('http://localhost:9090/user/register',{\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                'userName': payload.userName,\n                'password': payload.password,\n                'rePassword': payload.rePassword,\n                'email': payload.email\n            })\n        })\n    }\n);\nexport const fetchLogin = createAsyncThunk(\n    'auth/fetchLogin',\n    async(payload: ILogin)=>{\n        const response =  await fetch('http://localhost:9090/user/login',{\n            method: 'POST',\n            headers: {\n                'Content-Type': 'applciation/json'\n            },\n            body: JSON.stringify({\n                'userName': payload.userName,\n                'password': payload.password\n            })\n        }).then(res=> res.json())\n        return response;\n    }\n);\n\nconst authSlice = createSlice({\n    name: 'auth',\n    initialState: initialAuthState,\n    reducers:{},\n    extraReducers: (build)=>{\n        build.addCase(fetchRegister.pending,(state)=>{\n            state.isLoadingRegister = true;\n        });\n        build.addCase(fetchRegister.fulfilled,(state)=>{\n            state.isLoadingRegister = false;\n        });\n        build.addCase(fetchLogin.pending,(state)=>{\n            state.isLoadingLogin = true;\n        })\n        build.addCase(fetchLogin.fulfilled,(state,action: PayloadAction<IResponse>)=>{\n            state.isLoadingLogin = false;\n            if(action.payload.code === 200){\n                state.token = action.payload.data;\n            }else if(action.payload.code === 400)\n                alert(action.payload.message)\n            \n        })\n    }\n});"],"mappings":"AAAA,SAASA,gBAAgB,EAAEC,WAAW,QAAuB,kBAAkB;AAK/E,MAAMC,gBAAgB,GAAC;EACnBC,KAAK,EAAE,EAAE;EACTC,IAAI,EAAE,EAAE;EACRC,cAAc,EAAE,KAAK;EACrBC,iBAAiB,EAAE;AACvB,CAAC;AACD;AACA;AACA;AACA,OAAO,MAAMC,aAAa,GAAGP,gBAAgB,CACzC,oBAAoB,EACpB,MAAMQ,OAAkB,IAAG;EACzB,MAAMC,KAAK,CAAC,qCAAqC,EAAC;IAC5CC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACL,cAAc,EAAE;IACpB,CAAC;IACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MACjB,UAAU,EAAEN,OAAO,CAACO,QAAQ;MAC5B,UAAU,EAAEP,OAAO,CAACQ,QAAQ;MAC5B,YAAY,EAAER,OAAO,CAACS,UAAU;MAChC,OAAO,EAAET,OAAO,CAACU;IACrB,CAAC;EACL,CAAC,CAAC;AACN,CACJ,CAAC;AACD,OAAO,MAAMC,UAAU,GAAGnB,gBAAgB,CACtC,iBAAiB,EACjB,MAAMQ,OAAe,IAAG;EACpB,MAAMY,QAAQ,GAAI,MAAMX,KAAK,CAAC,kCAAkC,EAAC;IAC7DC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACL,cAAc,EAAE;IACpB,CAAC;IACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MACjB,UAAU,EAAEN,OAAO,CAACO,QAAQ;MAC5B,UAAU,EAAEP,OAAO,CAACQ;IACxB,CAAC;EACL,CAAC,CAAC,CAACK,IAAI,CAACC,GAAG,IAAGA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC;EACzB,OAAOH,QAAQ;AACnB,CACJ,CAAC;AAED,MAAMI,SAAS,GAAGvB,WAAW,CAAC;EAC1BwB,IAAI,EAAE,MAAM;EACZC,YAAY,EAAExB,gBAAgB;EAC9ByB,QAAQ,EAAC,CAAC,CAAC;EACXC,aAAa,EAAGC,KAAK,IAAG;IACpBA,KAAK,CAACC,OAAO,CAACvB,aAAa,CAACwB,OAAO,EAAEC,KAAK,IAAG;MACzCA,KAAK,CAAC1B,iBAAiB,GAAG,IAAI;IAClC,CAAC,CAAC;IACFuB,KAAK,CAACC,OAAO,CAACvB,aAAa,CAAC0B,SAAS,EAAED,KAAK,IAAG;MAC3CA,KAAK,CAAC1B,iBAAiB,GAAG,KAAK;IACnC,CAAC,CAAC;IACFuB,KAAK,CAACC,OAAO,CAACX,UAAU,CAACY,OAAO,EAAEC,KAAK,IAAG;MACtCA,KAAK,CAAC3B,cAAc,GAAG,IAAI;IAC/B,CAAC,CAAC;IACFwB,KAAK,CAACC,OAAO,CAACX,UAAU,CAACc,SAAS,EAAC,CAACD,KAAK,EAACE,MAAgC,KAAG;MACzEF,KAAK,CAAC3B,cAAc,GAAG,KAAK;MAC5B,IAAG6B,MAAM,CAAC1B,OAAO,CAAC2B,IAAI,KAAK,GAAG,EAAC;QAC3BH,KAAK,CAAC7B,KAAK,GAAG+B,MAAM,CAAC1B,OAAO,CAAC4B,IAAI;MACrC,CAAC,MAAK,IAAGF,MAAM,CAAC1B,OAAO,CAAC2B,IAAI,KAAK,GAAG,EAChCE,KAAK,CAACH,MAAM,CAAC1B,OAAO,CAAC8B,OAAO,CAAC;IAErC,CAAC,CAAC;EACN;AACJ,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}